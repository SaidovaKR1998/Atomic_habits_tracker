# Atomic Habits Tracker üèÜ

–ö—É—Ä—Å–æ–≤–∞—è —Ä–∞–±–æ—Ç–∞ - –±—ç–∫–µ–Ω–¥ —á–∞—Å—Ç—å SPA –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–ª—è —Ç—Ä–µ–∫–µ—Ä–∞ –ø–æ–ª–µ–∑–Ω—ã—Ö –ø—Ä–∏–≤—ã—á–µ–∫, –≤–¥–æ—Ö–Ω–æ–≤–ª–µ–Ω–Ω–æ–≥–æ –∫–Ω–∏–≥–æ–π –î–∂–µ–π–º—Å–∞ –ö–ª–∏—Ä–∞ "–ê—Ç–æ–º–Ω—ã–µ –ø—Ä–∏–≤—ã—á–∫–∏".

## üìã –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

- ‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (JWT)
- ‚úÖ CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è –ø—Ä–∏–≤—ã—á–µ–∫
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏–∏ –ø—Ä–∏–≤—ã—á–µ–∫ —Å–æ–≥–ª–∞—Å–Ω–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º –∫–Ω–∏–≥–∏
- ‚úÖ –ü–∞–≥–∏–Ω–∞—Ü–∏—è (5 –ø—Ä–∏–≤—ã—á–µ–∫ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É)
- ‚úÖ –ü—É–±–ª–∏—á–Ω—ã–µ –ø—Ä–∏–≤—ã—á–∫–∏
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ CORS –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram –¥–ª—è –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π
- ‚úÖ –û—Ç–ª–æ–∂–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏ —á–µ—Ä–µ–∑ Celery
- ‚úÖ –ü–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏ (>80%)
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞ Flake8

## üìö API –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:

Swagger UI: http://localhost:8000/swagger/

ReDoc: http://localhost:8000/redoc/

## üìä –û—Å–Ω–æ–≤–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
POST /api/users/register/ - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è

POST /api/token/ - –ü–æ–ª—É—á–µ–Ω–∏–µ JWT —Ç–æ–∫–µ–Ω–∞

GET /api/habits/ - –°–ø–∏—Å–æ–∫ –ø—Ä–∏–≤—ã—á–µ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

POST /api/habits/ - –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–∏–≤—ã—á–∫–∏

GET /api/habits/public/ - –ü—É–±–ª–∏—á–Ω—ã–µ –ø—Ä–∏–≤—ã—á–∫–∏

# Atomic Habits Tracker

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø—Ä–∏–≤—ã—á–µ–∫ —Å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è–º–∏ –∏ Telegram-–±–æ—Ç–æ–º.

## üöÄ –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫ (Docker Compose)

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
git clone https://github.com/SadovaKR1998/Atomic_habits_tracker.git
cd Atomic_habits_tracker

### 2. –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è
cp .env.example .env

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env —Ñ–∞–π–ª, —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å–≤–æ–∏ –∑–Ω–∞—á–µ–Ω–∏—è:
SECRET_KEY=–≤–∞—à-—Å–µ–∫—Ä–µ—Ç–Ω—ã–π-–∫–ª—é—á
DEBUG=True
ALLOWED_HOSTS=localhost,127.0.0.1
DATABASE_URL=postgresql://habits_user:Said43Said43@db:5432/habits_db
REDIS_URL=redis://redis:6379/0
TELEGRAM_BOT_TOKEN=–≤–∞—à-telegram-—Ç–æ–∫–µ–Ω

### 3. –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞
- –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:
docker-compose up --build
- –ò–ª–∏ –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ:
docker-compose up -d --build

### 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏
–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
- Django –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ: http://localhost:8000
- API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: http://localhost:8000/api/schema/swagger-ui/
- Admin –ø–∞–Ω–µ–ª—å: http://localhost:8000/admin/

## üê≥ Docker Compose –°–µ—Ä–≤–∏—Å—ã
–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ docker-compose up –±—É–¥—É—Ç –∑–∞–ø—É—â–µ–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã:

1. web (Django)

- –ü–æ—Ä—Ç: 8000
- –ü—Ä–æ–≤–µ—Ä–∫–∞: curl http://localhost:8000/health/

docker-compose exec web python manage.py check

2. db (PostgreSQL)

- –ü–æ—Ä—Ç: 5432
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:

docker-compose exec db pg_isready -U habits_user

3. redis

- –ü–æ—Ä—Ç: 6379
- –ü—Ä–æ–≤–µ—Ä–∫–∞:

docker-compose exec redis redis-cli ping

4. celery_worker (Celery Worker)

- –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á
- –ü—Ä–æ–≤–µ—Ä–∫–∞:

docker-compose logs celery_worker

5. celery_beat (Celery Beat)

- –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏—Ö –∑–∞–¥–∞—á
- –ü—Ä–æ–≤–µ—Ä–∫–∞:

docker-compose logs celery_beat

6. nginx (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω)

- –ü–æ—Ä—Ç: 80
- –ü—Ä–æ–≤–µ—Ä–∫–∞: curl http://localhost

## üìä –°—Ç–∞—Ç—É—Å –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤

- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –≤—Å–µ—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker-compose ps

- –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
docker-compose logs

- –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
docker-compose logs web
docker-compose logs celery_worker

## üîß –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

- –°–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
docker-compose exec web python manage.py makemigrations

- –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
docker-compose exec web python manage.py migrate

- –°–æ–∑–¥–∞—Ç—å —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
docker-compose exec web python manage.py createsuperuser

–†–∞–±–æ—Ç–∞ —Å–æ —Å—Ç–∞—Ç–∏–∫–æ–π

- –°–æ–±—Ä–∞—Ç—å —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã
docker-compose exec web python manage.py collectstatic --noinput

–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

- –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã
docker-compose exec web python manage.py test

- –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º
docker-compose exec web python manage.py test --coverage

–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ

- –û—Ç–∫—Ä—ã—Ç—å shell Django
docker-compose exec web python manage.py shell

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–¥–æ—Ä–æ–≤—å–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
docker-compose exec web python manage.py check --deploy

## üì± Telegram –ë–æ—Ç
–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–æ—Ç–∞
1) –°–æ–∑–¥–∞–π—Ç–µ –±–æ—Ç–∞ —á–µ—Ä–µ–∑ @BotFather –≤ Telegram
2) –ü–æ–ª—É—á–∏—Ç–µ —Ç–æ–∫–µ–Ω 
3) –î–æ–±–∞–≤—å—Ç–µ —Ç–æ–∫–µ–Ω –≤ .env —Ñ–∞–π–ª:

TELEGRAM_BOT_TOKEN=–≤–∞—à-—Ç–æ–∫–µ–Ω-–±–æ—Ç–∞

–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã –±–æ—Ç–∞

- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –±–æ—Ç –∑–∞–ø—É—â–µ–Ω
docker-compose logs web | grep "bot"

- –ò–ª–∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —á–µ—Ä–µ–∑ Django shell
docker-compose exec web python manage.py shell

## üöÄ Production Deploy
–î–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω-—Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ—Ç–¥–µ–ª—å–Ω—ã–π –∫–æ–Ω—Ñ–∏–≥:

docker-compose -f docker-compose.prod.yaml up -d

## üõ†Ô∏è –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫
–°–µ—Ä–≤–∏—Å –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

- –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å
docker-compose down
docker-compose up --build

- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
docker-compose logs --tail=100

–ü—Ä–æ–±–ª–µ–º—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö

- –°–±—Ä–æ—Å–∏—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö (–æ—Å—Ç–æ—Ä–æ–∂–Ω–æ!)
docker-compose down -v
docker-compose up -d

- –°–¥–µ–ª–∞—Ç—å –±–µ–∫–∞–ø
docker-compose exec db pg_dump -U habits_user habits_db > backup.sql

–ü—Ä–æ–±–ª–µ–º—ã —Å Redis

- –û—á–∏—Å—Ç–∏—Ç—å –∫–µ—à Redis
docker-compose exec redis redis-cli FLUSHALL